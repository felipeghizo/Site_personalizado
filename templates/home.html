<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Gourmet Receitas</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='home_style.css') }}">
</head>
<body>

    <nav class="category-tabs">
        <button class="active">Salgados</button>
        <button>Doces</button>
        <button>Drinks</button>
    </nav>

    <main class="container">
        <section class="recipe-list">
            {% for receita in receitas %}
            <div class="card" onclick="mostrarDetalhes('{{ loop.index0 }}')">
                <div class="user-badge">{{ receita.iniciais }}</div>
                <div class="title">{{ receita.nome }}</div>
                <div class="author">{{ receita.autor }}</div>
                <img src="{{ receita.imagem }}" alt="{{ receita.nome }}">
            </div>
            {% endfor %}
        </section>

        <section class="recipe-details" id="detalhes-receita">
            <h2 id="titulo-detalhe">Título</h2>
            <p class="author">Autor</p>
            <p class="descricao">Descrição</p>

            <h3>Ingredientes</h3>
            <p class="ingredientes">Ingredientes da receita</p>

            <h3>Modo de Preparo</h3>
            <p class="modo-preparo">Passo a passo...</p>

            <div class="actions">
                <button class="btn">Saber mais</button>
                <button class="btn">Cozinhar</button>
            </div>
        </section>
    </main>

    <script id="receitas-json" type="application/json">
        {{ receitas | tojson }}
    </script>

    <script>
        const dadosReceitas = JSON.parse(document.getElementById('receitas-json').textContent);

        function mostrarDetalhes(index) {
            index = Number(index);
            const r = dadosReceitas[index];
            if (!r) return;

            document.getElementById('titulo-detalhe').innerText = r.nome;
            document.querySelector('.recipe-details .author').innerText = r.autor;
            document.querySelector('.descricao').innerText = r.descricao;
            document.querySelector('.ingredientes').innerText = r.ingredientes.replace(/\r\n/g, ", ");
            document.querySelector('.modo-preparo').innerText = r.modo_preparo;

            document.querySelectorAll('.card').forEach((card, i) => {
                card.classList.toggle('selecionado', i === index);
            });
        }
    </script>
</body>
</html>
